## 단순한 설계 네 가지
> 착실하게 따르기만 하면 우수한 설계가?

- 모든 테스트를 실행
- 중복 제거
- 프로그래머 의도 표현
- 클래스와 메서드 수를 최소로

위 목록은 **중요도 순**


## 1. 모든 테스트 실행
설계는 의도한 대로 돌아가는 시스템을 내놓아야 한다.  
문서로는 시스템을 완벽하게 설게해도, 시스템이 의도한 대로 돌악가는 지 검증할 방법이 없다면,
문서 작성의 노력은 물거품이 된다.  

중요한 건, **테스트가 가능한 시스템을 만들려고 애쓰면, 설계 품질이 더불어 높아진다.**  
테스트 케이스를 많이 작성할수록 개발자는 DIP 같은 원칙을 적용하고, 의존성 주입, 인터페이스 ,추상화 등의 도구를 사용해서 **결합도를 낮춘다.**

### 리팩토링
>테스트케이스를 작성했다면 우리는 코드를 정리하면서 시스템이 깨질까 걱정할 필요가 없다.

구현을 하고 테스트 케이스를 작성했다면, 코드들을 정리하자.  
깔끔히 정리한 후, 테스트 케이스로 기존 기능이 깨지는 지 확인이 가능하다.

## 2. 중복을 없애자
> 중복은 추가 작업, 추가 위험, 불필요한 복잡도를 뜻한다.

```kotlin

class VacationPolicy {
    fun accrueUSDivisionVacation() {
        // 지금까지 근무한 시간을 바탕으로 휴가 일수를 계산하는 코드

        // 휴가 일수가 미국 최소 법정 일수를 만족하는지 확인하는 코드

        // 휴가 일수를 급여 대장에 적용하는 코드
    }

    fun accrueEUDivisionVacation() {
        // 지금까지 근무한 시간을 바탕으로 휴가 일수를 계산하는 코드

        // 휴가 일수가 유럽연합 최소 법정 일수를 만족하는지 확인하는 코드
        
        // 휴가 일수를 급여 대장에 적용하는 코드 
    }
}

```
위 코드는 최소 법정 일수를 만족하는 지 확인하는 코드만 빼면 모두 동일하다.  
중복을 제거해보자.

```kotlin
interface VacationPolicy {
    fun calculateBaseVacationHours() {
        // ...
    }
    fun alterForLegalMinimums()
    fun applyToPayroll() {
        // ...
    }
}

class USVacationPolicy: VacationPolicy {
    override fun alterForLegalMinimums() {
        // 미국 최소 법정 일수를 사용.
    }
}

class EUVacationPolicy: VacationPolicy {
    override fun alterForLegalMinimums() {
        // 유럽 연합 최소 법정 일수를 사용.
    }
}

```
위와 같이 사용하면 중복된 함수들을 다시 구현할 필요가 없어지고, 중복되지 않은 정보만 각 클래스에서 구현해서 사용하면 된다.

## 3. 프로그래머 의도 표현
> 코드의 의도를 표현하자. 나만 이해하면 안되고, 다른 사람(미래의 나)를 고려하자.

소프트웨어 프로젝트 비용 중 대다수는 장지적인 유지보수이다.    
그렇다면 유지보수 개발자가 시스템(코드)을 제대로 이해해야 버그의 싹을 심지 않는다.  
하지만 시스템(코드)가 복잡해진다면 유지보수 개발자가 이해하는 시간은 늘어나고, 오해할 가능성도 증가한다.  
그렇기에 의도를 분명히 표현해야 한다.  
1. 좋은 이름을 선택하자.
   - 이름과 기능의 불일치로 오해를 만들지 말자.
2. 함수와 클래스 크기를 가능한 줄이자.
   - 이름 짓기도 쉬워지고, 구현하기도 쉽고, 이해하기도 쉽다.
3. 표준 명칭
   - 디자인 패턴의 주요 목적은 의사소통과 표현력 강화.
   - 패턴을 사용했다면 해당 패턴의 이름을 넣어 표현한다면 다른 개발자가 이해하기 쉽다.
4. 단위 테스트
   - 테스트 케이스가 해당 프로젝트의 기능을 표현한다.

가장 중요한 건 **노력과 주의**

- 기능 구현(돌아만 가는)을 완료 했다고 해서, 다음 기능으로 직행하지 말자.  
- 나중에 읽을 사람을 위해 조금만 더 고민하고 시간을 투자하자.

## 4. 클래스와 메서드 수를 최소로
- 클래스와 메서드 크기를 줄이자고 한다면 클래스와 메서드 수가 늘어날 수 있다.
- 그렇기에 목표는 크기도 줄이고 시스템 크기도 줄이는 것에 있다.
- 어느정도 타협은 봐야한다. (그렇기에 우선순위가 가장 낮다)


>결국 이 책의 목표도 주의가 아닐까