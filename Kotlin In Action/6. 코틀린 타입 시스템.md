# 6장. 코틀린 타입 시스템

# 널 가능성

> 이 부분에선 자바와 kotlin 에서의 null 을 다루는 방식의 차이 및 코틀린만의 Null 을 더 잘 다루는 방법들을 보여준다.
> 하지만 이미 알고 있는 부분은 제외한다.

## !! (not-null assertion)

> 널이 아님을 단언한다.

근본적으로 `!!` 는 컴파일러에게 “나는 이 값이 `null` 이 아님을 잘 알고 있다. 내가 잘못 생각했다면 예외가 발생해도 감수하겠다” 라고 말하는 것

`!!` 가 약간 무례해 보인다.

마치 컴파일러에게 소리를 지르는 느낌을 준다.

→ 이건 사실 의도한 것이다.

→ 코틀린 설계자들은 컴파일러가 검증할 수 없는 단언을 사용하기보단 더 나은 방법을 찾아보라는 의도를 넌지시 표현하려고 `!!` 라는 못생긴 기호를 택했다

그럼 왜 있을까?

→ 때론 유용할 때가 있다.

예를 들어

```kotlin
 var name: String? = "Hee"

fun a() = name != null

fun b() {
    print(name.length) // Only safe (?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type String?
}

fun c() {
    a()
    b()
}
```

`a` 라는 함수 다음에 `b` 함수가 나올게 명시되어 있다. 이는 확실하다.

하지만? 컴파일러는 그런 연관 관계를 알지 못한다.

→ 그래서 `b` 함수에서 name 변수는 nullable 이다.

그럼 b 에서 `null check` 를 또 해야한다.

그러고 싶진 않다. 이미 null 이 아님을 확신할 수 있다.

그럴때 `!!` 쓰면 되는 것

그래도  `!!` 쓰고 싶지 않다면 아래처럼 하면 된다.

중복이긴 하지만, 나중에 `a` 함수가 변경될 수 있으니, 이렇게 안전 장치를 걸어두는 것도 좋은 방법이다.

```kotlin
// 1
fun b() {
	print(name!!.length)
}

// 2
fun b() {
	print(name?.length ?: return)
}
```

`!!`  로 `NPE` 가 일어나도 어떤 객체(프로퍼티)에서 예외가 발생한 지는 스택 트레이스에서 알려주지 않는다.

단순히 해당 `!!` 이 발생된 줄을 알려준다.

그래서 아래와 같이 한 줄에 함께 쓰는 일을 하지말자.

```kotlin
person.company!!.address!!.country
```