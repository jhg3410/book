# 5ì¥. ëŒë‹¤ë¡œ í”„ë¡œê·¸ë˜ë°

<aside>
ğŸ’¡ **ëŒë‹¤ ì‹, ëŒë‹¤**ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ë¥¸ í•¨ìˆ˜ì— ë„˜ê¸¸ ìˆ˜ ìˆëŠ” ì‘ì€ ì½”ë“œ ì¡°ê°ì„ ëœ»í•œë‹¤.

</aside>

# ì§€í”¼í‹°ì—ê²Œ ë¬¼ì–´ë³´ì ëŒë‹¤ì‹, ëŒë‹¤ì‹ì´ë€?

**ëŒë‹¤ì‹**ì€ ìµëª… í•¨ìˆ˜ì˜ í•œ í˜•íƒœë¡œ, ì´ë¦„ì´ ì—†ëŠ” í•¨ìˆ˜ë¥¼ ëœ»í•©ë‹ˆë‹¤.

ëŒë‹¤ì‹ì€ ì½”ë“œ ë¸”ë¡ì„ ë°ì´í„°ë¡œ ì·¨ê¸‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ë‹¤ë¥¸ í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬ë˜ê±°ë‚˜ ë³€ìˆ˜ì— ì €ì¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëŒë‹¤ì‹ì€ ì£¼ë¡œ ê°„ê²°í•˜ê³  ì¼íšŒì„±ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê°„ë‹¨í•œ í•¨ìˆ˜ ì •ì˜ì— ìœ ìš©í•©ë‹ˆë‹¤.

ì±…ì— ì¢‹ì€ ì˜ë¯¸ê°€ ìˆë‹¤.

ì¼ë ¨ì˜ ë™ì‘ì„ ë³€ìˆ˜ì— ì €ì¥í•˜ê±°ë‚˜, ë‹¤ë¥¸ í•¨ìˆ˜ì— ë„˜ê²¨ì•¼ í•˜ëŠ” ê²½ìš° ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ ì™”ì§€ë§Œ, ì´ì   ëŒë‹¤ë¡œ ì´ê²ƒì„ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤!!

ê·¸ëŸ¬ë‹ˆê¹

â€œì¼ë ¨ì˜ ë™ì‘ì„ ë³€ìˆ˜ì— ì €ì¥í•˜ê±°ë‚˜, ë‹¤ë¥¸ í•¨ìˆ˜ì— ë„˜ê²¨ì•¼ í•˜ëŠ” ê²½ìš° â€œ

ì´ëŸ´ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²Œ ëŒë‹¤.

í•¨ìˆ˜ë¥¼ ê°’ì²˜ëŸ¼ ì·¨ê¸‰í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

# ëŒë‹¤ ëŒ€ì‹  ë©¤ë²„ ì°¸ì¡°

```kotlin
val people = listOf(Person("Alice", 23), Person("Heejik", 26))

println(people.maxBy { it.age })   // ëŒë‹¤

println(people.maxBy(Person::age)) // ë©¤ë²„ ì°¸ì¡°
```

í•¨ìˆ˜ë‚˜ í”„ë¡œí¼í‹°ë¥¼ ë°˜í™˜í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ëŒë‹¤ëŠ” ë©¤ë²„ ì°¸ì¡°ë¡œ ëŒ€ì¹˜ê°€ ê°€ëŠ¥í•Ÿ.

# ëŒë‹¤ ì‹ì˜ ë¬¸ë²•

```kotlin
 { x: Int, y: Int -> x + y }
```

ì´ê²Œ ëŒë‹¤ ì‹ì´ë‹¤.

ì—¬ê¸°ì €ê¸° ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ë™ì‘ì˜ ëª¨ìŒ.

í•¨ìˆ˜ì— ì¸ìë¡œ ë„˜ê¸°ë©´ì„œ ì •ì˜í•˜ê¸°ë„, ë³€ìˆ˜ì— ì €ì¥í•˜ê¸°ë„ ê°€ëŠ¥í•˜ë‹¤.

ê°’ìœ¼ë¡œ ì·¨ê¸‰í•˜ë‹ˆê¹

```kotlin
val sum = { x: Int, y: Int -> x + y }
```

```kotlin
{ println(42) }()    // 1

run { println(42}    // 2
```

1 ì²˜ëŸ¼ ëŒë‹¤ì‹ì„ ì„ ì–¸ê³¼ ë™ì‹œì— ì§ì ‘ í˜¸ì¶œ(`()`) ì´ ê°€ëŠ¥í•˜ë‹¤.

í•˜ì§€ë§Œ êµ³ì´? ì½ê¸°ë„ ì–´ë µê³  ì“¸ëª¨ë„ ì—†ë‹¤.

í•˜ì§€ë§Œ ì´ë ‡ê²Œ ì“¸ ì¼ì´ ìˆë‹¤ë©´ 2ë²ˆ ì²˜ëŸ¼ `run` ì„ ì‚¬ìš©í•˜ë©´ ê°€ë…ì„±ì´ ë” ì¢‹ë‹¤.

ì½”í‹€ë¦°ì—ì„œ í•¨ìˆ˜ í˜¸ì¶œì— ëŒë‹¤ì‹ì„ íŒŒë¼ë¯¸í„°ë¡œ ì‚¬ìš©í•˜ë©´

ê´„í˜¸ ì™¸ë¶€ì— ì¤‘ê´„í˜¸ë¡œ ë°”ë¡œ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.

ì´ê²ƒì€ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ê°€ ëŒë‹¤í˜•íƒœë¡œ ë°›ì„ ë•Œë§Œ ê°€ëŠ¥í•˜ë‹¤.

ë§Œì•½ 2ê°œ ì´ìƒì˜ íŒŒë¼ë¯¸í„°ê°€ ëŒë‹¤ë¡œ ë°›ëŠ”ë‹¤ë©´ ì´ ë• ê´„í˜¸ë‚´ì— ì„ ì–¸í•˜ëŠ” ê²Œ ë” ë³´ê¸°ê°€ ì¢‹ë‹¤.

(ëˆ„êµ¬ëŠ” ê´„í˜¸ì—, ëˆ„êµ¬ëŠ” ì™¸ë¶€ì— ì°¨ë³„í•˜ì§€ë§ì.)

ëŒë‹¤ ì‹ì˜ íŒŒë¼ë¯¸í„°ê°€ í•˜ë‚˜ë¿ì´ê³  íƒ€ì…ì„ ì»´íŒŒì¼ëŸ¬ê°€ ì¶”ë¡ ì´ ê°€ëŠ¥í•  ë•Œ `it` ìœ¼ë¡œ ë°”ë¡œ í•´ë‹¹ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ë„ˆë¬´ ë‚¨ë°œí•˜ì§€ ë§ì.

íŠ¹íˆ ëŒë‹¤ê°€ ì¤‘ì²©ë˜ë©´ `it` ì´ ì–´ë”” ëŒë‹¤ì˜ íŒŒë¼ë¯¸í„°ì¸ì§€ íŒŒì•…í•˜ê¸° ì–´ë µë‹¤.

ëŒë‹¤ë¥¼ ë³€ìˆ˜ì— ì €ì¥í•  ë• íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ì¶”ë¡ í•  ë¬¸ë§¥ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ë¬´ì¡°ê±´ ëª…ì‹œ(ìš°ë¦¬ê°€ í•¨ìˆ˜ë¥¼ ì •ì˜í•  ë•Œë„ íŒŒë¼ë¯¸í„°ì— íƒ€ì…ì€ ë¬´ì¡°ê±´ ëª…ì‹œí•˜ëŠ” ëŠë‚Œ)

```kotlin
val getAge = { p: Person -> p.age }
people.maxBy(getAge)
```

ëŒë‹¤ì‹ì˜ ë³¸ë¬¸ì´ ì—¬ëŸ¬ ì¤„ë¡œ ì´ë¤„ì§ˆ ë•Œ ëŒë‹¤ì‹ì˜ ê²°ê³¼ëŠ” ë³¸ë¬¸ì˜ ë§¨ ë§ˆì§€ë§‰ì— ìˆëŠ” ì‹

# ëŒë‹¤ì˜ ë¹„ìš©

ì‹¤í–‰(ëŸ°íƒ€ì„) ì‹œì ì— ì½”í‹€ë¦° ëŒë‹¤ í˜¸ì¶œì—ëŠ” ì•„ë¬´ ë¶€ê°€ ë¹„ìš©ì´ ë“¤ì§€ ì•ŠëŠ”ë‹¤.

í”„ë¡œê·¸ë¨ì˜ ê¸°ë³¸ êµ¬ì„± ìš”ì†Œì™€ ë¹„ìŠ·í•œ ì„±ëŠ¥ì„ ê°€ì§„ë‹¤.

8ì¥ì— ì¶”ê°€ë¡œ ì´ìœ ê°€ ë‚˜ì˜¨ë‹¤ê³  í•˜ë‹ˆ ê·¸ë•Œ ìì„¸íˆ ì•Œì•„ë³´ì.

# ë©¤ë²„ ì°¸ì¡°(`::`)

ê°œë°œí•˜ë©´ì„œ ì¢…ì¢… ë§ì´ ì‚¬ìš©í•´ì™”ë‹¤.

`viewModel::getInfo`

ìš”ë ‡ê²Œ,,

ì–´ë–¨ ë•Œ ì‚¬ìš©í•˜ëƒë©´ í•¨ìˆ˜ì˜ ì¸ìë¡œ í•¨ìˆ˜ë¥¼ ë„˜ê¸¸ë•Œ(ê³ ì°¨í•¨ìˆ˜)ì—ì„œ ëŒë‹¤ ëŒ€ì‹  ì‚¬ìš©í•´ì™”ë‹¤.

`{ viewModel.getInfo() }` â†’  `viewModel::getInfo`

ì´ë ‡ê²Œ ëŒ€ì‹ í•  ìˆ˜ ìˆë‹¤.

**ê·¸ëŸ¼ ì´ê²Œ ì™œ ì¢‹ì€ê°€?**

ì¼ë‹¨ ë„˜ê¸°ë ¤ëŠ” ì½”ë“œê°€ í•¨ìˆ˜ì¸ë°, ê·¸ê±¸ ë˜ ëŒë‹¤ë¡œ ê°ì‹¸ë©´?

ì¤‘ë³µë˜ëŠ” ëŠë‚Œì´ ìˆë‹¤.

ëŒë‹¤ë„ í•¨ìˆ˜ì´ê³  ëŒë‹¤ ë‚´ë¶€ë„ í•¨ìˆ˜ì´ë‹¤. ê¸°ë¶„ì´ ì¢‹ì§€ì•Šë‹¤.

í•˜ì§€ë§Œ ë©¤ë²„ ì°¸ì¡°ëŠ” ë§¤ìš° ê¹”ë”í•˜ë‹¤.

ê·¸ë¦¬ê³  ëŒë‹¤ ë‚´ë¶€ì˜ í•¨ìˆ˜ì— ì¸ìê°€ ì—¬ëŸ¬ê°œë¼ë©´? ê·¸ë¦¬ê³  ë”±íˆ ë³€í™˜ì—†ì´ ê·¸ëƒ¥ ìœ„ì„í•˜ëŠ” ê²½ìš°ë¼ë©´?

ì•„ë˜ ì½”ë“œì²˜ëŸ¼.. ì¸ìê°€ ëŠ˜ì–´ë‚˜ë©´ ê³„ì† ì¶”ê°€í•´ì•¼í•œë‹¤. ìˆ˜ë™ì ìœ¼ë¡œ

```kotlin
navigateToLedgerDetail = { navOptions, ledgerId, isStaff ->
    homeNavController.navigateLedgerDetail(navOptions, ledgerId, isStaff)
}
```

ê·¸ëŸ°ë° ë©¤ë²„ ì°¸ì¡°ë¥¼ ì“°ë©´

```kotlin
navigateToLedgerDetail = homeNavController::navigateLedgerDetail
```

êµ³.  ì•Œì•„ì„œ ì¸ìê°€ ì˜ ë“¤ì–´ê°„ë‹¤.

ë˜ í•˜ë‚˜ ë©¤ë²„ ì°¸ì¡°ë¡œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.(ì´ê±´ ëª°ëë‹¤..)

```kotlin
val getAge = Person::age
```

ì´ê²Œ ëœë‹¤. ê·¸ëŸ¼ ì´ê±´ í•¨ìˆ˜ì´ë‹¤ íƒ€ì…ì€? `() â†’ Int`

ì´ë ‡ê²Œ ë³€ìˆ˜ì— í• ë‹¹í•œë‹¤ëŠ” ê±´ ê²°êµ­ ë©¤ë²„ ì°¸ì¡°ëŠ” ê°’ì„ ìƒì„±í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

ë‚œ ê¸°ì¡´ì—” ë©¤ë²„ ì°¸ì¡° ë©”ì„œë“œì— ì§ì ‘ ì ‘ê·¼í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì¤„ ì•Œì•˜ë‹¤.

ê°’ì„ ë§Œë“œëŠ” ì¤„ì€ ëª°ëë‹¤.

ê·¸ëŸ¼? ëŒë‹¤ë‘ ë‹¤ë¥¼ ê²Œ ë­ì•¼?

### ê°€ë…ì„±ë§ê³  ì¢‹ì€ ê²Œ ì—†ì–ì•„?(ê·¸ê±¸ë¡œë„ ì´ë¯¸ ì“¸ ì´ìœ ì§€ë§Œ)

`compose` ì—ì„œ `recomposition` ì—ì„œ ì°¨ì´ë¥¼ ê²½í—˜í•œ ì ì´ ìˆë‹¤.

ëŒë‹¤ë¥¼ ì“¸ ë•Œë³´ë‹¤ ë©¤ë²„ ì°¸ì¡°ë¥¼ ì“¸ ë•Œ `recomposition` ì´ ì ê²Œ ì¼ì–´ë‚¬ë‹¤.

ê·¸ë˜ì„œ ë©¤ë²„ ì°¸ì¡°ëŠ” ê°’ì„ ìƒˆë¡œ ìƒì„±í•œë‹¤ê³  ìƒê°í•˜ì§€ ì•Šì•˜ë‹¤.(ê°’ì´ë€ ê°œë…ì„ ìƒê°í•˜ì§€ ì•Šì•˜ë‹¤. ê·¼ë° ìƒê°í•´ë³´ë©´ í•¨ìˆ˜ì˜ ì¸ìë¡œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ”ë° ê°’ì´ë¼ê³  ìœ ì¶”í–ˆì–´ì•¼ í•˜ì§€ ì•Šë‚˜..?)

ê·¸ëŸ¼ ë¬´ìŠ¨ ì°¨ì´ê°€ ìˆê¸¸ë˜? recomposition ì—ì„œ ì°¨ì´ë¥¼ ë³´ì˜€ì„ê¹Œ?

ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ì.

```kotlin
fun printJik() {
    println("JIK")
}

fun main() {
    val member1 = ::printJik
    val lambda1 = { printJik() }
    val member2 = ::printJik
    val lambda2 = { printJik() }

    println("member1.hashcode = ${member1.hashCode()}")
    println("lambda1.hashcode = ${lambda1.hashCode()}")
    println("member2.hashcode = ${member2.hashCode()}")
    println("lambda2.hashcode = ${lambda2.hashCode()}")
}
```

```kotlin
a.hashcode = 824655241
b.hashcode = 500977346
c.hashcode = 824655241
d.hashcode = 20132171
```

ë³´ë©´ì€ ë©¤ë²„ ì°¸ì¡°ë¡œ í• ë‹¹ëœ ë³€ìˆ˜ì˜ hashcode ê°’ì€ í•­ìƒ ë™ì¼í–ˆë‹¤.

í•˜ì§€ë§Œ ëŒë‹¤ëŠ” ë³´ë‹¤ì‹œí”¼ hashcode ê°’ì´ ë‹¤ë¥´ë‹¤.

ì´ëŠ” ê²°êµ­ ë©¤ë²„ ì°¸ì¡°ëŠ” ê³„ì† ìƒˆë¡œìš´ ê°’ì„ ìƒì„± í•˜ëŠ” ê²Œ ì•„ë‹Œ ë‹¨ **í•˜ë‚˜ì˜** ê°’ë§Œ ìƒì„±í•˜ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆë‹¤.

ê·¸ë˜ì„œ `recomposition` ì—ì„œ ê´œì°®ì•˜êµ¬ë‚˜â€¦

# ì»¬ë ‰ì…˜ í•¨ìˆ˜í˜• API

```kotlin
people.filter { it.age == people.maxBy(Person::age)!!.age }
```

ì—¬ê¸°ì„œ ì˜ëª»ëœ ê²Œ ë­˜ê¹Œ?

ë§Œì•½ì— `people` ë¦¬ìŠ¤íŠ¸ì— ì›ì†Œê°€ 10ë§Œëª…ì´ ìˆë‹¤ë©´?

í•´ë‹¹ ì‹œê°„ ë³µì¡ë„ëŠ” **10ë§Œ * 10ë§Œ** ì´ ë˜ì–´ë²„ë¦°ë‹¤.

ê·¸ë˜ì„œ ëŒë‹¤ ë‚´ë¶€ì— ë˜ ëŒë‹¤ë¥¼ ë„˜ê¸°ë©´ ê²‰ìœ¼ë¡  ë‹¨ìˆœí•´ë³´ì—¬ë„, ë‚´ë¶€ì ìœ¼ë¡  ë§¤ìš° ë³µì¡í•œ ê³„ì‚°ì‹ì´ ë  ë•Œê°€ ìˆë‹¤.

ê·¸ëŸ¬ë‹ˆ ì•„ë˜ì²˜ëŸ¼ ì‚¬ìš©í•˜ì.

```kotlin
val maxAge = people.maxBy(Person::age)!!.age
people.filter { it.age == maxAge }
```

## groupBy

> ë¦¬ìŠ¤íŠ¸ë¥¼ ì—¬ëŸ¬ ê·¸ë£¹ìœ¼ë¡œ ì´ë¤„ì§„ ë§µìœ¼ë¡œ ë³€ê²½

```kotlin
val people = listOf(Person("Alice", 31), Person("Bob", 29), Person("Carol", 31))
println(people.groupBy { it.age })

>> {31=[Person(name=Alice, age=31), Person(name=Carol, age=31)], 29=[Person(name=Bob, age=29)]}
```

ì´ë ‡ê²Œ ë¦¬ìŠ¤íŠ¸ì˜ íŠ¹ì • ì†ì„±ìœ¼ë¡œ ê·¸ë£¹í™” í•˜ê³  ì‹¶ë‹¤ë©´ `groupBy` ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ê·¸ëŸ¼ `key` ê°€ í•´ë‹¹ ì†ì„±ì˜ ê°’, `value` ëŠ” í•´ë‹¹ ì†ì„±ì— ë”°ë¼ ê·¸ë£¹í™”ëœ ì›ì†Œë“¤ì´ ë¦¬ìŠ¤íŠ¸ ë°°ì—´ ì•ˆì— ë“¤ì–´ê°„ë‹¤.

## flatMap, flatten

> ì¤‘ì²©ëœ ì»¬ë ‰ì…˜ ì•ˆì˜ ì›ì†Œ ì²˜ë¦¬

**`flatMap`**

```kotlin
val strings = listOf("abc", "def", "ghi")
println(strings.flatMap { it.toList() })

>> [a, b, c, d, e, f, g, h, i]

val strings = listOf(listOf('a', 'b', 'c'), listOf('c', 'd', 'f'))
println(strings.flatMap { it + 1 })

>> [a, b, c, 1, c, d, f, 1]
```

flatMap ì˜ ì¸ìë¡œ ë°›ì€ ëŒë‹¤ë¥¼ ë¨¼ì € ëª¨ë“  ê°ì²´ì— ì‹¤í–‰í•œë‹¤. â†’ `map`

í•´ë‹¹ ê²°ê³¼ë¥¼ í•œ ë¦¬ìŠ¤íŠ¸ë¡œ ëª¨ì€ë‹¤. â†’ `flatten`

**`flatten`**

ê·¸ëŸ°ë° ë³€í˜• ì—†ì´ ë‹¨ìˆœíˆ í¼ì¹˜ê³ ë§Œ ì‹¶ë‹¤ë©´?

```kotlin
val strings = listOf(listOf('a', 'b', 'c'), listOf('c', 'd', 'f'))
println(strings.flatten())

>> [a, b, c, c, d, f]
```

## ì§€ì—° ê³„ì‚°(lazy) ì»¬ë ‰ì…˜ ì—°ì‚°(`sequence`)

```kotlin
people.map(Person::name).filter { it.startsWith("A") }
```

ìœ„ì™€ ê°™ì´ ì½”ë“œê°€ ìˆë‹¤ë©´ ë¦¬ìŠ¤íŠ¸ê°€ **2ê°œ**ê°€ ìƒì„±ëœë‹¤.

â†’ ì—°ì‡„ ì‹¤í–‰ë˜ë©´ì„œ `map` ì—ì„œ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜. `filter` ì—ì„œ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜í•˜ê¸°ì—

ê·¸ëŸ°ë° ì‚¬ì‹¤ ìš°ë¦¬ê°€ í•„ìš”í•œ ê±´ ë§ˆì§€ë§‰ ê²°ê³¼ì¸ ë¦¬ìŠ¤íŠ¸ **1ê°œ**ì´ë‹¤.

ì´ê²Œ ë§Œì•½ people ì˜ ì›ì†Œ ê°œìˆ˜ê°€ ì ìœ¼ë©´ ê´œì°®ê² ì§€ë§Œ ë§ë‹¤ë©´ ì„±ëŠ¥ìƒ ì¢‹ì§€ ì•Šë‹¤.(ë©”ëª¨ë¦¬)

ê·¸ëŸ¬ë©´ í•˜ë‚˜ë§Œ ë§Œë“¤ ìˆ˜ ì—†ë‚˜?

```kotlin
people.asSequence()
  .map(Person::name)
  .filter { it.startsWith("A") }
  .toList()
```

ì´ë ‡ê²Œ í•˜ë©´ ëœë‹¤.

ì´ëŸ¬ë©´ ë§ˆì§€ë§‰ `toList()` ì—ì„œ ë‹¨ í•˜ë‚˜ì˜ ë¦¬ìŠ¤íŠ¸ë§Œ ìƒì„±ëœë‹¤.

sequence ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¨ì§€ í•œ ë²ˆì— í•˜ë‚˜ì”© ì—´ê±°ë  ìˆ˜ ìˆëŠ” ì›ì†Œì˜ ì‹œí€€ìŠ¤ë¥¼ í‘œí˜„í•  ë¿ì´ë‹¤.

ë‚´ë¶€ì— `iterator` ë©”ì„œë“œ ë‹¨ í•˜ë‚˜ê°€ ìˆìœ¼ë©° ì´ë¥¼ í†µí•´, ì‹œí€€ìŠ¤ì—ì„œ ì›ì†Œ ê°’ì„ ì–»ëŠ”ë‹¤.

ì–´ë–»ê²Œ ì €ê²Œ ê°€ëŠ¥í• ê¹Œ?

ì‹œí€€ìŠ¤ì˜ ì—°ì‚°ì€ í•„ìš”í•  ë•Œ ê³„ì‚°ëœë‹¤.

ê·¸ë˜ì„œ ì—°ì‡„ ì‹¤í–‰í•  ë•Œ ì¤‘ê°„ ì¤‘ê°„ ê²°ê³¼ë¥¼ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.

### **ì‹œí€€ìŠ¤ì˜ ì—°ì‚°**

ì‹œí€€ìŠ¤ëŠ” ì¤‘ê°„ ì—°ì‚°ê³¼ ìµœì¢… ì—°ì‚°ìœ¼ë¡œ ë‚˜ë‰œë‹¤.

ì¤‘ê°„ ì—°ì‚°ì€ ë‹¤ë¥¸ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜. â†’ í•´ë‹¹ ì‹œí€€ìŠ¤ëŠ” ì´ì „ì˜ ì‹œí€€ìŠ¤ì˜ ì›ì†Œë¥¼ ë³€í™˜í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‹¤.

ìµœì¢… ì—°ì‚°ì€ ê²°ê³¼ë¥¼ ë°˜í™˜(ê²°ê³¼ëŠ” ì•ì„  ê³„ì‚°ì„ ìˆ˜í–‰í•´ ì–»ì„ ìˆ˜ ìˆëŠ” ì»¬ë ‰ì…˜, ì›ì†Œ, ìˆ«ì ë˜ëŠ” ê°ì²´)

![Untitled](resource/Untitled.png)

ì—°ì‚°ì˜ ìˆ˜í–‰ ìˆœì„œë¥¼ ë³´ì.

```kotlin
listOf(1, 2, 3, 4).asSequence()
  .map { print("map($it) "); it * it }
  .filter { print("filter($it) "); it % 2 == 0 }
  .toList()

>> map(1) filter(1) map(2) filter(4) map(3) filter(9) map(4) filter(16) 
```

ì¼ë°˜ ì»¬ë ‰ì…˜ì´ë¼ë©´ `map` í•¨ìˆ˜ ëª¨ë‘ ì‹¤í–‰í•œ ë’¤, `filter` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤.

í•˜ì§€ë§Œ ì‹œí€€ìŠ¤ì˜ ê²½ìš° ëª¨ë“  ì—°ì‚°ì€ ê° ì›ì†Œì— ëŒ€í•´ ìˆœì°¨ì ìœ¼ë¡œ ì €ìš©ëœë‹¤.

ì²« ë²ˆì§¸ ì›ì†Œ ëª¨ë“  ì—°ì‚° ìˆ˜í–‰ â†’ ë‘ ë²ˆì§¸ ì›ì†Œ ëª¨ë“  ì—°ì‚° ìˆ˜í–‰ â†’ â€¦

ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ì›ì†Œì— ì—°ì‚°ì„ ì°¨ë¡€ëŒ€ë¡œ ìˆ˜í–‰í•˜ë‹¤ê°€ ì›í•˜ëŠ” ê²°ê³¼ê°€ ì–»ì–´ì§€ë©´ ê·¸ ì´í›„ì˜ ì›ì†Œì— ëŒ€í•œ ì—°ì‚°ì€ ì´ë¤„ì§€ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

```kotlin
listOf(1, 2, 3, 4)
	.asSequence()
  .map { it * it }
  .find { it > 3 }
```

ì—¬ê¸°ì„œ `find` ëŠ” ìµœì¢… ì—°ì‚°ì´ë‹¤.(ìˆ«ìë¥¼ ë°˜í™˜í•˜ë‹ˆ)

ì´ê±¸ ì¼ë°˜ ì»¬ë ‰ì…˜ì—ì„œì˜ ê³„ì‚° ê³¼ì •(ì¦‰ì‹œ ê³„ì‚°)ê³¼ ë¹„êµí•´ë³´ì.

![Untitled](resource/Untitled1.png)

ì´ë ‡ê²Œ ì§€ì—° ê³„ì‹¼ì„ í•˜ë©´ ì›ì†Œ ì°¨ë¡€ë¡œ ì—°ì‚°í•˜ê¸°ì—, map í•¨ìˆ˜ë¥¼ ëª¨ë‘ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.

â†’ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¼ì¹œë‹¤

ì´ê±¸ ë‹¤ë¥¸ ì˜ˆì‹œë¡œ ë³´ë©´

```kotlin
val people = listOf(Person("Alice", 29), Person("Bob", 31), Person("Carol", 34), Person("David", 32))
    
// 1
people.asSequence()
    .map(Person::name)
    .filter { it.length < 4 }
    .toList()

// 2
people.asSequence()
    .filter { it.name.length < 4 }
    .map(Person::name)
    .toList()
```

1ë²ˆê³¼ 2ë²ˆì˜ ê²°ê³¼ëŠ” ì°¨ì´ê°€ ì—†ë‹¤. í•˜ì§€ë§Œ

ì—°ì‚° íšŸìˆ˜ì—ì„œ ì°¨ì´ê°€ ë‚œë‹¤.

![Untitled](resource/Untitled2.png)

### **ì‹œí€€ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ì.**

ì§€ê¸ˆê¹Œì§„ `asSequence()` ë¡œ ê¸°ì¡´ì˜ ì»¬ë ‰ì…˜ì„ ë¹„ë¡¯í•´ì„œ ë§Œë“¤ì—ˆë‹¤.

ë°”ë¡œ ìƒì„±í•˜ê³  ì‹¶ìœ¼ë©´

```kotlin
val naturalNumbers = generateSequence(0) { it + 1 }
val numbersTo100 = naturalNumbers.take(101)
val sum = numbersTo100.sum()
println(sum)
```

`naturalNumbers`, `numbersTo100` ëª¨ë‘ ì‹œí€€ìŠ¤ë©°, ì—°ì‚°ì„ ì§€ì—° ê³„ì‚°í•œë‹¤.

ê·¸ë˜ì„œ ìµœì¢… ì—°ì‚°í•˜ê¸°ê¹Œì§„ ì‹œí€€ìŠ¤ì˜ ìˆ«ìëŠ” ê³„ì‚°ë˜ì§€ ì•ŠëŠ”ë‹¤.

(sum() ì´ ìµœì¢… ì—°ì‚°ì´ë‹¤.)

ìœ„ì˜ ì˜ˆì‹œë§ê³  ë˜ ë‹¤ë¥¸ ì˜ˆì‹œë¥¼ í•˜ë‚˜ ë³´ì.

```kotlin
fun File.isInsideHiddenDirectory() = 
        generateSequence(this) { it.parentFile }.any { it.isHidden }

val file = File("path/to/file")
println(file.isInsideHiddenDirectory())
```

## ìë°” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ í™œìš©

> ìë°”ë¡œ ì‘ì„±ëœ API ì—ì„œ ëŒë‹¤ë¥¼ ì‚¬ìš©í•´ë³´ì

ì•„ë˜ëŠ” ì•ˆë“œë¡œì´ë“œ ê°œë°œì„ ì‹œì‘í•˜ë©´ ì´ˆê¸°ì— ì ‘í•˜ëŠ” êµ¬ë¬¸ì´ë‹¤.

```kotlin
button.setOnClickListener { view -> /* ... */ }
```

ì—¬ê¸°ì„œ `setOnClickListener` ë¥¼ ë“¤ì—¬ë‹¤ ë³´ì

```java
public void setOnClickListener(@Nullable OnClickListener l) {
	// ...
}
```

í•„ìš”í•œ ì¸ìì˜ íƒ€ì…ì€ `OnClickListener` ì´ë‹¤

ê·¸ëŸ¼ `OnClickListener` ë¥¼ ë“¤ì—¬ë‹¤ ë³´ì

```java
public interface OnClickListener {
  void onClick(View v);
}
```

ë†€ëê²Œë„ ì¸í„°í˜ì´ìŠ¤ì´ê³ , `onClick` ì´ë€ ë©”ì„œë“œê°€ ì„ ì–¸ë˜ì–´ ìˆë‹¤.

ê·¸ëŸ¼ ìë°”8ì—ì„  í•´ë‹¹ ì½”ë“œë¥¼ ì–´ë–»ê²Œ ì§¤ê¹Œ? (ëŒë‹¤ë¥¼ ì“°ì§€ ì•Šê³ )

```java
button.setOnClickListener(new OnClickListener () {
    @Override
    public void onClick(View v) {
        println("ë¬´ëª…(ìµëª…) í´ë˜ìŠ¤ë¡œ êµ¬í˜„")
    }
}
```

ì´ë ‡ê²Œ ë¬´ëª… í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

í•˜ì§€ë§Œ ì½”í‹€ë¦°ì—ì„  ìœ„ì™€ ê°™ì´ ëŒë‹¤ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤.

```java
button.setOnClickListener {
    println("ì½”í‹€ë¦°ì—ì„œ ëŒë‹¤ë¡œ êµ¬í˜„")
}
```

ì´ê²Œ ê°€ëŠ¥í•œ ì´ìœ ëŠ” OnClickListener ê°€ **í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ë˜ëŠ” SAM ì¸í„°í˜ì´ìŠ¤ ì´ê¸° ë•Œë¬¸ì´ë‹¤.**

â†’ ë‹¨ í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œë¥¼ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ë¯¸

ì½”í‹€ë¦°ì—ì„  í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¸ìë¡œ ì·¨í•˜ëŠ” ìë°” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•
ëŒë‹¤ë¡œ ì¸í„°í˜ì´ìŠ¤ ë‚´ë¶€ ë©”ì„œë“œë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

ë˜ ë‹¤ë¥¸ ì˜ˆì‹œë¡œ

```java
void postponeComputation(int delay, Runnable computation)
```

ìœ„ ìë°”ì˜ í•¨ìˆ˜ë¥¼ ì•„ë˜ì˜ kotlin ì½”ë“œë¡œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤

```kotlin
postponeComputation(1000) { println(42 } 
```

ì´ë ‡ê²Œë„ ê°€ëŠ¥í•˜ë‹¤

```kotlin
postponeComputation(1000, object: Runnable {
    override fun run() {
        println(42)
    }
})
```

ê·¸ëŸ¼ ì§€ê¸ˆê¹Œì§€ ë³¸ ê²Œ ì–´ë–¤ ê±¸ ì˜ë¯¸í•˜ëƒë©´

<aside>
ğŸ’¡ ì»´íŒŒì¼ëŸ¬ê°€ ëŒë‹¤ë¥¼ ìë™ìœ¼ë¡œ ë¬´ëª… í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.


</aside>

ì—¬ê¸°ì„œ ëŒë‹¤ ë³¸ë¬¸ì€ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ì¼í•œ ë©”ì„œë“œ ë³¸ë¬¸ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

í•˜ì§€ë§Œ ì°¨ì´ëŠ” ì¡´ì¬í•œë‹¤.

ìµëª… í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì„œ ë„˜ê¸°ë©´ í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±í•œë‹¤.

â†’ but. ëŒë‹¤ëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì§€ ì•Šê³ , ë°˜ë³µ ì‚¬ìš©í•œë‹¤.

ì—¬ê¸°ì„œë„ ì˜ˆì™¸ëŠ” ìˆë‹¤.

```kotlin
fun handleComputation(id: String) {
    postponeComputation(1000) { println(id) }
}
```

ì´ë ‡ê²Œ í•˜ë©´  ëŒë‹¤ì—ì„œ `id`  ë³€ìˆ˜ë¥¼ í¬íší•œë‹¤.

ê·¸ëŸ¼ í•´ë‹¹ `handleComputation` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ Runnable ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ëœë‹¤.

â†’ ì™œëƒë©´ í•¨ìˆ˜ê°€ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ `id` ê°’ì´ ë°”ë€” ìˆ˜ ìˆìœ¼ë‹ˆ

### SAM ìƒì„±ì: ëŒë‹¤ë¥¼ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¡œ ëª…ì‹œì ìœ¼ë¡œ ë³€ê²½

> ì»´íŒŒì¼ëŸ¬ê°€ ëŒë‹¤ë¥¼ ìë™ìœ¼ë¡œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¡œ ë³€í™˜í•´ì£¼ì§€ë§Œ, ê·¸ë ‡ì§€ ëª»í•˜ëŠ” ê²½ìš°ì—” ìˆ˜ë™ìœ¼ë¡œ í•´ì•¼í•œë‹¤.

```kotlin
fun createAllDoneRunnable(): Runnable {
    return { println("All done!") } // Type mismatch
}
```

print ë¥¼ ê°€ì§€ëŠ” ëŒë‹¤ë¥¼ Runnable ì¸ìŠ¤í„´ìŠ¤ë¡œ ìë™ìœ¼ë¡œ ì»´íŒŒì¼ì´ ë³€í™˜í•´ì£¼ì§€ ì•ŠëŠ”ë‹¤.

ê·¸ëŸ¼ ì–´ë–»ê²Œ í•  ìˆ˜ ìˆëƒë©´

```kotlin
fun createAllDoneRunnable(): Runnable {
    return Runnable { println("All done!") }
}
```

ì´ë ‡ê²Œ ëŒë‹¤ ì•ì— ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì´ë¦„ì„ ë¶™ì´ë©´ ëœë‹¤.

ì´ê±¸ SAM ìƒì„±ìë¼ê³  í•˜ë©°, ëŒë‹¤ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ì¼í•œ ì¶”ìƒ ë©”ì„œë“œì˜ ë³¸ë¬¸ì— ì‚¬ìš©ëœë‹¤.

ìœ ìš©í•œ ìš©ë¡€ë¡œëŠ”

```kotlin
val listener = OnClickListener { view ->
    val text = when (view.id) {
        R.id.button1 -> "Button 1 clicked"
        R.id.button2 -> "Button 2 clicked"
        else -> "Unknown button clicked"
    }
    taost(text)
}

findViewById<Button>(R.id.button1).setOnClickListener(listener)
findViewById<Button>(R.id.button2).setOnClickListener(listener)
```

ì´ë ‡ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤

### ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤

> ì±…ì—ì„  `with` ê³¼ `apply`  ê´€ë ¨ëœ ë‚´ìš©ì´ ë‚˜ì˜¤ì§€ë§Œ, ì•„ëŠ” ë‚´ìš©ì´ê¸°ì— ë¹¼ê³  ìƒ‰ë‹¤ë¥¸ ë‚´ìš©ë§Œ

```kotlin
fun alphabet() = with(StringBuilder()) {
    for (letter in 'A'..'Z') {
        append(letter)
    }
    append("\nNow I know the alphabet!")
    toString()
}
```

`with` ì„ ì‚¬ìš©í•´ì„œ `StringBuilder` ë¥¼ ìˆ˜ì‹  ê°ì²´ë¡œ ë°›ì•„, ì½”ë“œë¥¼ ê¹”ë”íˆ í•œ ì˜ˆì‹œì´ë‹¤.

ê·¸ëŸ°ë° ì´ê±¸

```kotlin
fun alphabet() = buildString {
    for (letter in 'A'..'Z') {
        append(letter)
    }
    append("\nNow I know the alphabet!")
}
```

ì´ë ‡ê²Œê°€ ê°€ëŠ¥í•˜ë‹¤

ë‚´ë¶€ì ìœ¼ë¡œ `StringBuilder` ë¥¼ ë§Œë“¤ê³  `toString()` ê¹Œì§€ ì•Œì•„ì„œ í•´ì¤€ë‹¤

```kotlin
inline fun buildString(builderAction: StringBuilder.() -> Unit): String {
    contract { callsInPlace(builderAction, InvocationKind.EXACTLY_ONCE) }
    // !!!
    return StringBuilder().apply(builderAction).toString()
}
```